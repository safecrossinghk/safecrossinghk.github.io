<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<title>OneSignal Debug æ¸¬è©¦</title>
<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async></script>
<style>
body { font-family: Arial, sans-serif; margin: 20px; }
.ok { color: green; }
.err { color: red; }
</style>
</head>
<body>
<h2>ğŸ”” OneSignal Debug æ¸¬è©¦</h2>
<p>è¨‚é–±ç‹€æ…‹ï¼š<span id="status">æª¢æŸ¥ä¸­...</span></p>
<p>player_id (User ID)ï¼š<input id="player_id" type="text" readonly style="width:300px"></p>
<button id="subscribeBtn">ğŸ“© æ‰‹å‹•è§¸ç™¼è¨‚é–±</button>

<script>
window.OneSignal = window.OneSignal || [];
OneSignal.push(function() {
OneSignal.init({
appId: "880241cd-cc45-4820-b5ec-a1236b0e3e98",
safari_web_id: "âš ï¸å¦‚æœæœ‰çš„è©±ï¼Œå¡«ä½ çš„safari_web_idâš ï¸",
notifyButton: { enable: true }
});

// æª¢æŸ¥è¨‚é–±ç‹€æ…‹
OneSignal.isPushNotificationsEnabled(function(isEnabled) {
document.getElementById("status").textContent =
isEnabled ? "âœ… å·²å•Ÿç”¨é€šçŸ¥" : "âŒ æœªè¨‚é–±";
document.getElementById("status").className = isEnabled ? "ok" : "err";
});

// ç›£è½ç‹€æ…‹è®ŠåŒ–
OneSignal.on('subscriptionChange', function (isSubscribed) {
document.getElementById("status").textContent =
isSubscribed ? "âœ… å·²è¨‚é–±æˆåŠŸ" : "âŒ å·²å–æ¶ˆè¨‚é–±";
document.getElementById("status").className = isSubscribed ? "ok" : "err";

if (isSubscribed) {
OneSignal.getUserId().then(function(userId) {
console.log("player_id =", userId);
document.getElementById("player_id").value = userId || "âš ï¸ ç„¡æ³•å–å¾—";
});
}
});
});

// æ‰‹å‹•è§¸ç™¼è¨‚é–±
document.getElementById("subscribeBtn").addEventListener("click", function() {
OneSignal.push(function() {
OneSignal.registerForPushNotifications();
});
});
</script>
</body>
</html>