<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<title>Test iOS PWA Standalone æª¢æ¸¬</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: sans-serif; padding: 20px; }
.ok { color: green; font-weight: bold; }
.warn { color: red; font-weight: bold; }
pre { background: #f0f0f0; padding: 10px; }
</style>
</head>
<body>
<h2>ğŸ“± iOS PWA æ¸¬è©¦ (test3a_ios_v2.html)</h2>
<div id="status">åˆå§‹åŒ–ä¸­...</div>
<pre id="ua"></pre>

<script>
function detectEnv() {
const ua = navigator.userAgent;
const isIOS = /iPhone|iPad|iPod/i.test(ua);
const isSafari = /^((?!chrome|android).)*safari/i.test(ua);
const inStandalone = window.navigator.standalone === true;

document.getElementById("ua").innerText = ua;
let msg = `isIOS: ${isIOS}, isSafari: ${isSafari}, inStandalone(PWA): ${inStandalone}`;

if (isIOS && isSafari && !inStandalone) {
msg += "\nâš ï¸ ä½ ä¿‚ iOS Safariï¼Œä½†ä»²æœªä»¥ PWA ä¸»ç•«é¢æ¨¡å¼æ‰“é–‹ã€‚";
msg += "\nğŸ‘‰ è«‹ç”¨ Safari â†’ åˆ†äº« â†’ åŠ åˆ°ä¸»ç•«é¢ï¼Œå†ç”±æ–° icon é–‹å•Ÿã€‚";
document.getElementById("status").innerHTML = "<span class='warn'>" + msg + "</span>";
alert("âš ï¸ è«‹ç¢ºèªä½ ä¿‚ç”±ä¸»ç•«é¢ Icon é–‹å•Ÿï¼Œè€Œå””ä¿‚ç›´æ¥ç”¨ Safariã€‚");
} else if (inStandalone) {
msg += "\nâœ… å·²ç¢ºèªä¿‚ PWA ä¸»ç•«é¢æ¨¡å¼ï¼Œå¯ä»¥é€²ä¸€æ­¥æ¸¬è©¦ OneSignal Web Pushã€‚";
document.getElementById("status").innerHTML = "<span class='ok'>" + msg + "</span>";
alert("âœ… æˆåŠŸåµæ¸¬åˆ° Standalone æ¨¡å¼ï¼");
} else {
document.getElementById("status").innerHTML = msg;
}
}

detectEnv();
</script>
</body>
</html>