<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<title>æœªä¾†åŠå°æ™‚é›¨å‹¢é å ±</title>
<style>
body {
font-family: Arial, sans-serif;
padding: 20px;
background: #f0f0f0;
}
#rainText {
font-size: 20px;
font-weight: bold;
color: #333;
padding: 10px;
background: #fff;
border-radius: 8px;
display: inline-block;
}
</style>
</head>
<body>
<h2>é¦™æ¸¯åœ°å€æœªä¾†åŠå°æ™‚é›¨å‹¢</h2>
<div id="rainText">æ­£åœ¨è¼‰å…¥é›¨å‹¢è³‡æ–™...</div>

<script>
const API_KEY = "Eff94C5FCuRqlqWKPt0tXwHM1niZNEYh"; // è«‹æ›æˆ Tomorrow.io çš„ API Key
const LAT = 22.329, LON = 114.144; // é¦™æ¸¯åº§æ¨™ï¼Œå¯æ”¹å…¶ä»–åœ°é»

fetch(`https://api.tomorrow.io/v4/weather/forecast?location=${LAT},${LON}&fields=rainIntensity,precipitationProbability&timesteps=1m&units=metric&apikey=${API_KEY}`)
.then(res => res.json())
.then(data => {
const minutes = data.data.timelines.minutely.slice(0, 30); // å–æœªä¾† 30 åˆ†é˜

let maxRain = 0;
let maxProb = 0;

minutes.forEach(m => {
if (m.values.rainIntensity > maxRain) maxRain = m.values.rainIntensity;
if (m.values.precipitationProbability > maxProb) maxProb = m.values.precipitationProbability;
});

let text = `æœªä¾†åŠå°æ™‚ï¼šâ˜€ï¸ ç„¡é›¨ï¼ˆé™é›¨æ©Ÿç‡ ${maxProb}%ï¼‰`;
if (maxRain > 0 && maxRain <= 2) text = `æœªä¾†åŠå°æ™‚ï¼šğŸŒ¦ å°é›¨ï¼ˆé™é›¨æ©Ÿç‡ ${maxProb}%ï¼‰`;
else if (maxRain > 2 && maxRain <= 6) text = `æœªä¾†åŠå°æ™‚ï¼šğŸŒ§ ä¸­é›¨ï¼ˆé™é›¨æ©Ÿç‡ ${maxProb}%ï¼‰`;
else if (maxRain > 6) text = `æœªä¾†åŠå°æ™‚ï¼šâ›ˆ å¤§é›¨ï¼ˆé™é›¨æ©Ÿç‡ ${maxProb}%ï¼‰`;

document.getElementById("rainText").innerText = text;
})
.catch(err => {
document.getElementById("rainText").innerText = "âš ï¸ é›¨å‹¢è³‡æ–™è®€å–å¤±æ•—";
console.error(err);
});
</script>
</body>
</html>