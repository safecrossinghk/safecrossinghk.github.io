<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<title>æœªä¾†2å°æ™‚é›¨å‹¢æç¤º</title>
</head>
<body>
<div id="rainMsg"></div>

<script>
const API_KEY = "Eff94C5FCuRqlqWKPt0tXwHM1niZNEYh"; // æ›æˆä½ å˜… Tomorrow.io API Key
const LAT = 22.3, LON = 114.2; // é¦™æ¸¯åº§æ¨™

fetch(`https://api.tomorrow.io/v4/weather/forecast?location=${LAT},${LON}&timesteps=1h&apikey=${API_KEY}`)
.then(res => res.json())
.then(data => {
const hours = data.timelines.hourly.slice(0, 2); // åªå–æœªä¾†2å°æ™‚
let willRain = false;

hours.forEach((h, idx) => {
const rain = h.values.rainIntensity; // æ¯å°æ™‚é›¨é‡ (mm/hr)
const prob = h.values.precipitationProbability; // é™é›¨æ©Ÿç‡ (%)

// Debug log
console.log(`å°æ™‚ ${idx + 1}: é›¨é‡=${rain} mm/hr, æ©Ÿç‡=${prob}%`);

if (rain >= 1 && prob >= 70) {
willRain = true;
}
});

if (willRain) {
document.getElementById("rainMsg").innerText = "ğŸŒ§ ä½ æ‰€åœ¨çš„ä½ç½®é è¨ˆæœªä¾†ç´„å…©å°æ™‚æœ‰é›¨";
} else {
document.getElementById("rainMsg").innerText = ""; // ç©ºç™½
}
})
.catch(() => document.getElementById("rainMsg").innerText = "âš ï¸ è³‡æ–™è®€å–å¤±æ•—");
</script>
</body>
</html>